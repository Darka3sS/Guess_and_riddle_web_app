version: '3.9'
services:
  frontend:
    build: ./Frontend
    ports:
      - "80:80"

  backend: 
    build: ./Backend
    ports:
      - "5000:5000"
    environment:
      #VARIABILI PER IL DB
      #HOST_DB Ã¨ il nomehost per la comunicazione interna tra containers nella rete virtuale
      USERNAME_DB: ${USERNAME_DB}
      PASSWORD_DB: ${PASSWORD_DB}
      NAME_DB: ${NAME_DB}
      HOST_DB: "db"
      # VARIABILE D'AMBIENTE PER LA API DI GEMINI
      GEMINI_API_KEY: ${GEMINI_API_KEY}
    command: python app.py
    depends_on:
      - db

  db:
    image: postgres:16
    environment:
      POSTGRES_USER: ${USERNAME_DB}
      POSTGRES_PASSWORD: ${PASSWORD_DB}
      POSTGRES_DB: ${NAME_DB}
    volumes:
      - pgdata:/var/lib/postgresql/data

volumes:
  pgdata: